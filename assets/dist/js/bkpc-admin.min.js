(()=>{var a={276:()=>{var r=window.BKPC||{},t=jQuery;r.uploadBackup=function(e){e.preventDefault();var n=t(e.target),o=t(e.target).closest("form"),e=new FormData;e.append("action","upload_backup"),e.append("nonce",bkpc.nonce),e.append("file",t('input[name="backup-file"]')[0].files[0]),t.ajax({method:"post",url:bkpc.ajax_url,data:e,cache:!1,processData:!1,contentType:!1,beforeSend:function(){r.ajaxBeforeSend(n)},success:function(e,t,a){r.ajaxSuccess(n,e,!0),o.find('input[name="backup-file"]+span').text("Choose Backup File...")},error:function(e,t,a){r.ajaxError(n,"Ajax error! Backup upload failed.")}})},jQuery(document).on("click",'button[name="upload-backup"]',r.uploadBackup)},367:()=>{var r=window.BKPC||{},t=jQuery;r.restoreBackup=function(e){e.preventDefault();var n=t(e.target),o=t(e.target).closest("form");r.setStatus(o.closest("table").find("td"),"wait"),t.ajax({method:"post",url:bkpc.ajax_url,data:{action:"restore_backup",nonce:bkpc.nonce,uuid:o.find("input[name=uuid]").val()},beforeSend:function(){r.ajaxBeforeSend(n)},success:function(e,t,a){r.setStatus(o.closest("table").find("td"),"success"),r.ajaxSuccess(n,e)},error:function(e,t,a){r.setStatus(o.closest("table").find("td"),"error"),r.ajaxError(n,"Ajax error! Backup restore failed.")}})},jQuery(document).on("click",'button[name="restore-backup"]',r.restoreBackup)},551:()=>{var r=window.BKPC||{},t=jQuery;r.createBackup=function(e){e.preventDefault();var n=t(e.target),o=t(e.target).closest("form");r.uuid=Math.floor((new Date).getTime()/1e3),r.setStatus(o.closest("table").find("td"),"wait"),t.ajax({method:"post",url:bkpc.ajax_url,data:{action:"create_backup",nonce:bkpc.nonce,uuid:r.uuid,notes:o.find('input[name="notes"]').val(),advanced_options:r.getTextFieldArray(t("input[name='advanced-options']:checked")),find_text:r.getTextFieldArray(t("input[name='find-text']")),replace_with_text:r.getTextFieldArray(t("input[name='replace-with-text']"))},beforeSend:function(){r.ajaxBeforeSend(n)},success:function(e,t,a){r.setStatus(o.closest("table").find("td"),"success"),r.ajaxSuccess(n,e),o.find('input[name="notes"]').val("")},error:function(e,t,a){r.setStatus(o.closest("table").find("td"),"error"),r.ajaxError(n,"Server timeout! Created backup files could be corrupted.")}})},jQuery(document).on("click",'button[name="create-backup"]',r.createBackup)},649:()=>{var r=window.BKPC||{},t=jQuery;r.exportBackup=function(e){e.preventDefault();var n=t(e.target),o=t(e.target).closest("form");r.uuid=Math.floor((new Date).getTime()/1e3),t.ajax({method:"post",url:bkpc.ajax_url,data:{action:"export_backup",nonce:bkpc.nonce,uuid:r.uuid,notes:o.find('input[name="notes"]').val(),advanced_options:r.getTextFieldArray(t("input[name='advanced-options']:checked")),find_text:r.getTextFieldArray(t("input[name='find-text']")),replace_with_text:r.getTextFieldArray(t("input[name='replace-with-text']"))},beforeSend:function(){r.ajaxBeforeSend(n)},success:function(e,t,a){r.ajaxSuccess(n,e,!1),n.prop("disabled",!1),o.find('input[name="notes"]').val("")},error:function(e,t,a){r.ajaxError(n,"Ajax error! Backup export failed.")}})},jQuery(document).on("click",'button[name="export-backup"]',r.exportBackup)},682:()=>{var r=window.BKPC||{},a=jQuery;r.deleteBackup=function(e){e.preventDefault();var n=a(e.target),o=a(e.target).closest("form");r.setStatus(o.closest("table").find("td"),"wait"),a.ajax({method:"post",url:bkpc.ajax_url,data:{action:"delete_backup",nonce:bkpc.nonce,uuid:o.find("input[name=uuid]").val()},beforeSend:function(){var e,t;r.ajaxBeforeSend(n),o.find("input[name=download_url]").length&&o.find("input[name=uuid]").length&&(t=o.find("input[name=download_url]").val(),e=o.find("input[name=uuid]").val()+".zip",t=a("<a/>").css("display","none").attr({href:t,download:e}),a("body").append(t),t[0].click(),t.remove())},success:function(e,t,a){r.setStatus(o.closest("table").find("td"),"success"),r.ajaxSuccess(n,e)},error:function(e,t,a){r.setStatus(o.closest("table").find("td"),"error"),r.ajaxError(n,"Ajax error! Backup delete failed.")}})},jQuery(document).on("click",'button[name="delete-backup"]',r.deleteBackup)},695:()=>{var n=window.BKPC||{},o=jQuery;n.ajaxBeforeSend=function(e){e.prop("disabled",!0),n.startTimer(o(".bkpc-timer")),n.startProgressBar(o("body")),n.startProgressNotice()},n.ajaxSuccess=function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];n.stopTimer(o(".bkpc-timer")),n.stopProgressBar(o("body")),n.stopProgressNotice(),n.showNotice(JSON.parse(t)),!0===a&&n.reloadAllBackups(e)},n.ajaxError=function(e,t){n.stopTimer(o(".bkpc-timer")),n.stopProgressBar(o("body")),n.stopProgressNotice(),n.showNotice(t),n.reloadAllBackups(e)}},859:()=>{var r=window.BKPC||{},t=jQuery;r.downloadBackup=function(e){e.preventDefault();var n=t(e.target),o=t(e.target).closest("form");r.setStatus(o.closest("table").find("td"),"wait"),t.ajax({method:"post",url:bkpc.ajax_url,data:{action:"download_backup",nonce:bkpc.nonce,uuid:o.find("input[name=uuid]").val()},beforeSend:function(){r.ajaxBeforeSend(n)},success:function(e,t,a){r.setStatus(o.closest("table").find("td"),"success"),r.ajaxSuccess(n,e)},error:function(e,t,a){r.setStatus(o.closest("table").find("td"),"error"),r.ajaxError(n,"Ajax error! Backup download failed.")}})},jQuery(document).on("click",'button[name="download-backup"]',r.downloadBackup)},995:()=>{window.BKPC=window.BKPC||{};var e,o=window.BKPC,a=jQuery;o.uuid=Math.floor((new Date).getTime()/1e3),o.timerInstance,o.progressBarInstance,o.progressNoticeInstance,o.dismissNotice=function(e){e.preventDefault(),($elem=a(e.target)).closest(".bkpc-notice-dimiss.is-dismissible").remove()},o.showCustomFileUploadURL=function(e){e.preventDefault(),$elem=a(e.target),$span=a(".bkpc-custom-file-upload span").empty(),$elem.val()?$span.text($elem[0].files[0].name):$span.text("Choose Backup File...")},o.toggleAdvancedOptions=function(e){e.preventDefault(),($elem=a(e.target)).find("i.dashicons").toggleClass("dashicons-arrow-right").toggleClass("dashicons-arrow-down"),a(".bkpc-advanced-options").fadeToggle()},o.startTimer=function(e){var t,a,n=0;o.timerInstance=setInterval(function(){t=parseInt(n/60,10),a=parseInt(n%60,10),t=t<10?"0"+t:t,a=a<10?"0"+a:a,e.text(t+":"+a),n++},1e3)},o.stopTimer=function(e){clearInterval(o.timerInstance),e.empty()},o.startProgressBar=function(e){var t;e.append(a("<div/>").addClass("bkpc-progressbar")),o.progressBarInstance=setInterval(function(){(t=a(".bkpc-progressbar").width()+10)>=a(document).width()-t?a(".bkpc-progressbar").css({width:"0px"}):a(".bkpc-progressbar").css({width:t+"px"})},100)},o.stopProgressBar=function(e){clearInterval(o.progressBarInstance),e.find(".bkpc-progressbar").remove()},o.progressBar=function(e){e.append(a("<div/>").addClass("bkpc-progressbar")),o.startProgressBar()},o.startProgressNotice=function(e){var t=bkpc_create_backup.url+o.uuid+"/progress.txt";o.progressNoticeInstance=setInterval(function(){a.ajax({method:"get",url:t,xhr:function(){var e=a.ajaxSettings.xhr();return e.onprogress=function(e){a.get(t,function(e){var t=new RegExp(/\[Done\]/,"g");o.showNotice(e.replace(t,"<strong>[Done]</strong><br />"),"notice-info bkpc-notice-progress")})},e}})},1e3)},o.stopProgressNotice=function(){clearInterval(o.progressNoticeInstance)},o.showNotice=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"notice-success";a(".bkpc-notice-container").empty(),a(".bkpc-notice-container").append(a("<div/>").addClass("notice bkpc-notice-dimiss is-dismissible "+t).html('<button type="button" class="notice-dismiss bkpc-notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button><p>'+e+"</p>"))},o.reloadAllBackups=function(e){a("#bkpc-all-backups-container").load(" #bkpc-all-backups-container > *"),e.prop("disabled",!1)},o.getTextFieldArray=function(e){var t=[];return e.each(function(){t.push(a(this).val())}),t},o.humanFileSize=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=t?1e3:1024;if(Math.abs(e)<n)return e+" B";for(var o=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1,s=Math.pow(10,a);e/=n,++r,Math.round(Math.abs(e)*s)/s>=n&&r<o.length-1;);return e.toFixed(a)+" "+o[r]},o.setStatus=function(e,t){var a=e.closest("table").find("td").css("transition","background-color 600ms ease-in-out");a.css({wait:{background:"transparent",opacity:"0.25"},success:{background:"#B8E6C1",opacity:"1"},error:{background:"#F8C4C4",opacity:"1"}}[t]||{}),"success"!==t&&"error"!==t||setTimeout(function(){a.css({background:"transparent",opacity:"1"})},1e3)},(e=jQuery)(document).on("click",".bkpc-notice-dismiss",o.dismissNotice),e(document).on("click",".bkpc-advanced-options-toggle",o.toggleAdvancedOptions),e(document).on("change",'.bkpc-custom-file-upload input[name="backup-file"]',o.showCustomFileUploadURL)}},n={};function o(e){var t=n[e];return void 0!==t||(t=n[e]={exports:{}},a[e](t,t.exports,o)),t.exports}o(995),o(695),o(551),o(682),o(859),o(649),o(367),o(276)})();